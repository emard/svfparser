! Comment
! Serial Vector Format (.SVF) File.

! Bitstream to test if svfparser
! properly handles incomplete bytes

! TODO: properly prepare and comment the "remember" test
! we need to test if svfparser "remembers" those fields
! that have to be remembered between commands.

HDR	0;
HIR	0;
TDR	0;
TIR	0;
ENDDR	DRPAUSE;
ENDIR	IRPAUSE;
FREQUENCY	1.00e+06 HZ;
STATE	IDLE;


! Check the IDCODE

! Shift in IDCODE_PUB(0xE0) instruction
SIR	8	TDI  (E0);

! examples of unusual content which is
! completely allowed by the JTAG standard
! here we try to cover many different
! situations with incomplete bytes
! and padding where bugs may appear
! at bitbanging

SDR	28	TDI  (0000000)
		TDO  (1112043)
		MASK (FFFFFFF);

SDR	29	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	30	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	31	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	32	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	33	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	34	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	35	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	36	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	37	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	38	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	39	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	40	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	41	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	42	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	43	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	44	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	45	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	46	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	47	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);

SDR	48	TDI  (00000000)
		TDO  (41112043)
		MASK (FFFFFFFF);


! Program Bscan register

! Shift in Preload(0x1C) instruction
SIR	8	TDI  (1C);
SDR	510	TDI  (3FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
			 FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF);


! Enable SRAM programming mode

! Shift in ISC ENABLE(0xC6) instruction
SIR	8	TDI  (C6);
SDR	8	TDI  (00);
RUNTEST	IDLE	2 TCK	1.00E-02 SEC;


! Verify the Encryption Enable

! Shift in LSC_READ_STATUS(0x3C) instruction
SIR	8	TDI  (3C);
RUNTEST	IDLE	2 TCK	1.00E-03 SEC;
SDR	32	TDI  (00000000)
		TDO  (00000000)
		MASK (00024040);


! Erase the SRAM

! Shift in ISC ERASE(0x0E) instruction
SIR	8	TDI  (0E);
SDR	8	TDI  (01);
RUNTEST	IDLE	2 TCK	2.00E-01 SEC;


! Program Fuse Map

! Shift in LSC_READ_STATUS(0x3C) instruction
SIR	8	TDI  (3C);
SDR	32	TDI  (00000000)
		TDO  (00000000)
		MASK (0000B000);
! Shift in LSC_INIT_ADDRESS(0x46) instruction
SIR	8	TDI  (46);
SDR	8	TDI  (01);
RUNTEST	IDLE	2 TCK	1.00E-02 SEC;
! Shift in LSC_BITSTREAM_BURST(0x7A) instruction
SIR	8	TDI  (7A);
! Shift in 1302224 bits
SDR	8000	TDI  (000000000000FF40BF0000000000000000000000000000FF40BF0000000000000000000000000000
			 FF40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF000000
			 0000000000000000000000FF40BF0000000000000000000000000000FF40BF000000000000000000
			 0000000000FF40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF
			 40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF00000000
			 00000000000000000000FF40BF0000000000000000000000000000FF40BF00000000000000000000
			 00000000FF40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF40
			 BF0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF0000000000
			 000000000000000000FF40BF0000000000000000000000000000FF40BF0000000000000000000000
			 000000FF40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF
			 0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF000000000000
			 0000000000000000FF40BF0000000000000000000000000000FF40BF000000000000000000000000
			 0000FF40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF00
			 00000000000000000000000000FF40BF0000000000000000000000000000FF40BF00000000000000
			 00000000000000FF40BF0000000000000000000000000000FF40BF00000000000000000000000000
			 00FFCCF600000000000000000000000000007F24891D000000620000000200000044031360060728
			 182300000040C204888200000047000000DCFFFFFFFFCDBDFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
			 FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
			 FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
			 FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
			 FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
			 FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
			 FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
			 FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
			 FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF);
SDR	8000	TDI  (0000000000FF40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF
			 40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF00000000
			 00000000000000000000FF40BF0000000000000000000000000000FF8A4B00000000000000000000
			 0000000A40FF40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF
			 40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF00000000
			 00000000000000000000FF5FC20000188E43131E40000004229084000000006200FF5FC20000188E
			 43131E40000004229084000000006200FF40BF0000000000000000000000000000FF40BF00000000
			 00000000000000000000FF40BF0000000000000000000000000000FF40BF00000000000000000000
			 00000000FF2014003100000000000000000000000000FF2014003100000000000000000000000000
			 FF40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF000000
			 0000000000000000000000FF40BF0000000000000000000000000000FF40BF000000000000000000
			 0000000000FF40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF
			 40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF00000000
			 00000000000000000000FF40BF0000000000000000000000000000FF40BF00000000000000000000
			 00000000FF40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF40
			 BF0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF0000000000
			 000000000000000000FF40BF0000000000000000000000000000FF40BF0000000000000000000000
			 000000FF40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF
			 0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF000000000000
			 0000000000000000FF40BF0000000000000000000000000000FF40BF000000000000000000000000
			 0000FF40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF00
			 00000000000000000000000000FF40BF0000000000000000000000000000FF40BF00000000000000
			 00000000000000FF40BF0000000000000000000000000000FF40BF00000000000000000000000000
			 00FF40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF0000
			 000000000000000000000000FF40BF0000000000000000000000000000FF40BF0000000000000000);
SDR	6224	TDI  (FFFFFFFF0000007A11110000000000000143FFFFFFFFFFFFFFFFFFFFFFFFFFFB4B00000000001390
			 C41390C409000000000C84210B00FFC284000000120049C887E588B8E3C8C73117106186200C4000
			 0010990930A9627480FF86D800000120049C91E58F2C796263C8E7101C862C400000290484929434
			 80FF4F7D000000240090444160944416027A0C0720874000000D4104844100FF4AF7000000000029
			 12061090902027000831840000014888088E2440FFFEE200000000006624C0C04800010303000000
			 044C0C186440FFA0100000000C40310C4C13080412000042000000E40C30467100FF9F8600000007
			 401D1CF461D04E410E8E400188200000005C10F18D5100FF25A50000C80C40310C1C121038240188
			 0C400000005E9061866900FF2A2D00000521080423914623914623901867218800000148662104A4
			 3300FFD2BF00000000000000001CB1000000000000FF40BF0000000000000000000000000000FF40
			 BF0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF0000000000
			 000000000000000000FF40BF0000000000000000000000000000FF40BF0000000000000000000000
			 000000FF40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF
			 0000000000000000000000000000FF40BF0000000000000000000000000000FF40BF000000000000
			 0000000000000000FF40BF0000000000000000000000000000FF40BF000000000000000000000000
			 0000FF40BF0000000000000000000000000000FF40BF0000000000000000000000000000FF777C00
			 00A4211484200000062390C4000000005200FF6F40000064000000000000000000000000FFCF8100
			 0000022000000000000000000000FFFF80000000062000000000000000000000FF62580000000018
			 6000000000000000000000FFFF80000000062000000000000000000000FF40BF0000000000000000
			 000000000000FF15C0000000029000000000000000000000FF15C000000002900000000000000000
			 0000FF40BF00000000000000000000000000);
RUNTEST	IDLE	100 TCK	1.00E-02 SEC;


! Verify USERCODE

! Shift in READ USERCODE(0xC0) instruction
SIR	8	TDI  (C0);
RUNTEST	IDLE	2 TCK	1.00E-03 SEC;
SDR	32	TDI  (00000000)
		TDO  (00000000)
		MASK (FFFFFFFF);


! Exit the programming mode

! Shift in ISC DISABLE(0x26) instruction
SIR	8	TDI  (26);
RUNTEST	IDLE	2 TCK	2.00E-01 SEC;
! Shift in BYPASS(0xFF) instruction
SIR	8	TDI  (FF);
RUNTEST	IDLE	2 TCK	1.00E-03 SEC;


! Verify Status Register

! Shift in LSC_READ_STATUS(0x3C) instruction
SIR	8	TDI  (3C);
SDR	32	TDI  (00000000)
		TDO  (00000100)
		MASK (00002100);
